<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Tangerine&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

  <title>Casamento Cheila & Luiz</title>
  <style>
    body {
      font-family: 'handlee', cursive;
      background-color: #f8f9fa;
      color: #003366;
      margin: 0;
      padding: 0;
    }

    header {
      background-image: url('fundo.jpg');
      background-size: cover;
      background-position: center;
      color: white;
      text-align: center;
      padding: 60px 20px;
    }

    header h1 {
      font-family: 'Tangerine', cursive;
      font-size: 70px;
      margin: 0;
      color: #fff8dc;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.6);
    }

    header p {
      font-family: 'handlee', cursive;
      font-size: 20px;
    }

    h1, h2 {
      margin: 10px 0;
      text-align: center;
    }

    section {
      padding: 20px;
      text-align: center;
    }

    .galeria-decorada {
      display: flex;
      justify-content: center;
      padding: 40px 20px;
      background-color: #eef4ff;
    }

    .carrossel-com-flores {
      position: relative;
      width: 90%;
      max-width: 600px;
    }

    .carrossel {
      width: 100%;
      height: 400px;
      overflow: hidden;
    }

    .carrossel .slide {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      transform: translate(-50%, -50%);
      object-fit: cover;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      border-radius: 20px;
      border: 3px solid #d4af37;
      box-shadow: 0 0 15px rgba(212, 175, 55, 0.7);
    }

    .carrossel .ativo {
      opacity: 1;
      z-index: 1;
    }

    .presente {
      background: #e0ecff;
      padding: 15px;
      margin: 10px auto;
      max-width: 100%;
      border-radius: 10px;
    }

    .form-confirmacao, .form-presente {
      max-width: 600px;
      margin: 0 auto;
      background: #f0f0f0;
      padding: 20px;
      border-radius: 10px;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-family: Arial, sans-serif;
    }

    button {
      padding: 10px 20px;
      background-color: #001f3f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #003366;
    }

    #presentes-confirmados {
      padding: 20px;
/*      background-color: #fffef8;*/
      text-align: center;
    }

    #presentes-confirmados .presente {
      background: #f1f8ff;
      max-width: 100%;
/*      border: 2px dashed #d4af37;*/

    }

    .slider-container {
      overflow: hidden;
      max-width: 100%;
      margin: 0 auto;
      border-radius: 10px;
      border: 2px dashed #d4af37;
      background: #f1f8ff;
      padding: 10px;
    }

    .slider-track {
      display: flex;
      transition: transform 0.5s ease;
      gap: 15px;
      max-width: 100%;
    }

    #lista-confirmados {
      display: flex;
      overflow-x: auto;
      gap: 20px;
      height: 300px;
      align-items: center;
      padding: 10px;
      max-width: 100%;
    }

    #prev-btn, #next-btn {
      background-color: #d4af37;
      border: none;
      color: white;
      font-size: 24px;
      padding: 5px 15px;
      cursor: pointer;
      border-radius: 8px;
      margin: 10px 5px;
    }

    #prev-btn:hover, #next-btn:hover {
      background-color: #b9922f;
    }

    .card-pix {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }

    .conteudo-card {
      background-color: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      max-width: 300px;
      border: 4px solid #d4af37;
      box-shadow: 0 0 20px rgba(212, 175, 55, 0.8);
      position: relative;
    }

    .fechar {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
    }

    .conteudo-card button {
      margin-top: 10px;
      background-color: #d4af37;
      color: #fff;
      font-weight: bold;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
    }

    .conteudo-card button:hover {
      background-color: #b9922f;
    }

    .presente {
  transition: transform 0.3s ease, opacity 0.3s ease;
}
.presente.adicionado {
  transform: scale(1.05);
  opacity: 0.9;
}


  </style>
</head>
<body>

  <header>
    <h1> Luiz & Cheila teste 2 </h1>
    <p>Nosso grande dia: 12/09/2026</p>
  </header>

<section class="galeria-decorada">
  <div class="carrossel-com-flores">
    <div class="carrossel">
      <img src="casal01.jpg" class="slide ativo" alt="Foto do casal 1">
      <img src="casal02.jpg" class="slide" alt="Foto do casal 2">
      <!-- Adicione mais fotos aqui -->
    </div>
  </div>
</section>




<section>
  <h2>Lista de Presentes</h2>

<div class="presente">
  <img src="teste.jpg" alt="Netflix" style="width:100px; border-radius: 8px; margin-bottom: 10px;">
  <p><strong>1 m√™s de Netflix</strong> ‚Äî R$ 50</p>
  <button onclick="abrirPix('1 m√™s de Netflix')">Presentear via PIX</button>
</div>

<div class="presente">
  <img src="teste.jpg" alt="Kit miojo" style="width:100px; border-radius: 8px; margin-bottom: 10px;">
  <p><strong>Kit miojo gourmet</strong> ‚Äî R$ 50</p>
  <button onclick="abrirPix('Kit miojo gourmet')">Presentear via PIX</button>
</div>

<div class="presente">
  <img src="teste.jpg" alt="Vale brigadeiro" style="width:100px; border-radius: 8px; margin-bottom: 10px;">
  <p><strong>Vale brigadeiro para crises conjugais</strong> ‚Äî R$ 60</p>
  <button onclick="abrirPix('Vale brigadeiro para crises conjugais')">Presentear via PIX</button>
</div>

</section>
<section>      <!-- Card PIX -->
      <div id="card-pix" class="card-pix">
  <div class="conteudo-card">
        <p><span id="presente-titulo"></span></p>
    <span class="fechar" onclick="fecharPix()">√ó</span>
    <h3>Chave PIX:</h3>
    <p id="chave-pix">92986437318</p>
    <button onclick="copiarPix()">üìã Copiar PIX</button><br><br>
    <label for="nome-doador">Seu nome:</label>
<input type="text" id="nome-doador" placeholder="Digite seu nome (opcional)">


        <label for="comentario-pix">Coment√°rio (opcional):</label>
<textarea id="comentario-pix" rows="3" placeholder="Por que escolheu esse presente?"></textarea>
<button onclick="confirmarPresente()">Confirmar Presente</button>


  </div>
</div>


    </div>
  </section>

  <section>
  <h2>Quer nos dar outro presente?</h2>
  <div class="form-presente">
    <input type="text" id="outro-nome" placeholder="Seu nome (opcional)">
    <input type="text" id="outro-presente" placeholder="Nome do presente" required>
    <textarea id="outro-mensagem" placeholder="Por que escolheu esse presente?" required></textarea>
    <input type="file" id="outro-foto" accept="image/*">
    <button onclick="presentearOutroPresente()">Presentear via PIX</button>
  </div>
</section>


  <section>
    <h2>Confirma√ß√£o de Presen√ßa</h2>
    <form class="form-confirmacao" onsubmit="enviarConfirmacaoPresenca(event)">
      <input type="text" name="nomePessoa" placeholder="Seu nome" required>
      <input type="number" name="quantidade" placeholder="Quantas pessoas?" min="1" required>
      <textarea name="acompanhantes" placeholder="Nomes dos acompanhantes" required></textarea>
      <button type="submit">Confirmar Presen√ßa</button>
    </form>
  </section>
<section id="presentes-confirmados">
  <h2>Presentes Confirmados üíù</h2>
  <div class="slider-container">
    <div id="lista-confirmados" class="slider-track"></div>
  </div>
  <button id="prev-btn">‚Äπ</button>
  <button id="next-btn">‚Ä∫</button>
</section>


<script>
  let index = 0;
  const slides = document.querySelectorAll('.carrossel .slide');

  function mostrarSlide() {
    slides.forEach((slide, i) => {
      slide.classList.remove('ativo');
      if (i === index) {
        slide.classList.add('ativo');
      }
    });
    index = (index + 1) % slides.length;
  }

  setInterval(mostrarSlide, 3000); // muda a cada 3 segundos
</script>

<script>
function abrirPix(nomePresente) {
  document.getElementById("presente-titulo").innerText = nomePresente;
  document.getElementById("comentario-pix").value = "";  // limpa o coment√°rio
  document.getElementById("card-pix").style.display = "flex";
}

  function fecharPix() {
    document.getElementById("card-pix").style.display = "none";
  }

  function copiarPix() {
    const chave = document.getElementById("chave-pix").innerText;
    navigator.clipboard.writeText(chave).then(() => {
      alert("Chave PIX copiada com sucesso!");
    }).catch(() => {
      alert("Erro ao copiar. Copie manualmente.");
    });
  }
</script>
<script>
  // Mapeia nome do presente para a imagem do presente fixo
const imagensPresentesFixos = {
  "1 m√™s de Netflix": "teste.jpg",
  "Kit miojo gourmet": "teste.jpg",
  "Vale brigadeiro para crises conjugais": "teste.jpg"
};

function uploadImgur(base64) {
  const clientId = "e97188fb3420e97"; // Seu Client-ID do Imgur
  return fetch("https://api.imgur.com/3/image", {
    method: "POST",
    headers: {
      Authorization: "Client-ID " + clientId,
      Accept: "application/json"
    },
    body: new URLSearchParams({
      image: base64.split(',')[1],
      type: "base64"
    })
  })
    .then(response => response.json())
    .then(data => data.data.link)
    .catch(() => "teste.jpg"); // fallback se der erro
}

// function confirmarPresente() {
//   const nomePresente = document.getElementById("presente-titulo").innerText;
//   const comentario = document.getElementById("comentario-pix").value;
//   const nomeDoador = document.getElementById("nome-doador").value || "An√¥nimo";

//   let srcImagem = document.getElementById("card-pix").dataset.imagemConfirmacao;
//   if (!srcImagem) {
//     srcImagem = imagensPresentesFixos[nomePresente] || "teste.jpg";
//   }

//   const presenteHTML = `
//     <div class="presente">
//       <img src="${srcImagem}" alt="${nomePresente}" style="width:100%; border-radius: 8px; margin-bottom: 10px;">
//       <p><strong>${nomePresente}</strong></p>
//       <p>De: <em>${nomeDoador}</em></p>
//       <p>${comentario || "Sem coment√°rio üòÖ"}</p>
//     </div>
//   `;

//   adicionarPresenteConfirmado(presenteHTML);

//   fecharPix();

//   const imgTemp = document.getElementById("img-temp");
//   if (imgTemp) imgTemp.remove();
//   delete document.getElementById("card-pix").dataset.imagemConfirmacao;
//   currentIndex = listaConfirmados.children.length - 1;
//   updateSlider();
// }

// Fun√ß√£o para tratar o presente personalizado com upload de imagem
function presentearOutroPresente() {
  const nomeDoador = document.getElementById("outro-nome").value || "An√¥nimo";
  const presente = document.getElementById("outro-presente").value;
  const comentario = document.getElementById("outro-mensagem").value || "Sem coment√°rio üòÖ";
  const imagemInput = document.getElementById("outro-foto");
  const imagemArquivo = imagemInput.files[0];

  if (!presente) {
    alert("Por favor, preencha o nome do presente.");
    return;
  }

  if (imagemArquivo) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const srcImagem = e.target.result;

      // Atualiza o card PIX para confirma√ß√£o
      document.getElementById("presente-titulo").innerText = presente;
      document.getElementById("comentario-pix").value = comentario;
      document.getElementById("nome-doador").value = nomeDoador;

      // Exibe a imagem no card (opcional)
      // Por exemplo, criar uma imagem tempor√°ria no card
      let imgTemp = document.getElementById("img-temp");
      if (!imgTemp) {
        imgTemp = document.createElement("img");
        imgTemp.id = "img-temp";
        imgTemp.style.width = "100px";
        imgTemp.style.borderRadius = "8px";
        imgTemp.style.marginBottom = "10px";
        const conteudoCard = document.querySelector(".conteudo-card");
        conteudoCard.insertBefore(imgTemp, conteudoCard.firstChild);
      }
      imgTemp.src = srcImagem;

      document.getElementById("card-pix").style.display = "flex";

      // Guardar a imagem no input para depois exibir na confirma√ß√£o
      document.getElementById("card-pix").dataset.imagemConfirmacao = srcImagem;
    };
    reader.readAsDataURL(imagemArquivo);
  } else {
    // Sem imagem: limpa a imagem tempor√°ria do card, se houver
    const imgTemp = document.getElementById("img-temp");
    if (imgTemp) imgTemp.remove();

    document.getElementById("presente-titulo").innerText = presente;
    document.getElementById("comentario-pix").value = comentario;
    document.getElementById("nome-doador").value = nomeDoador;
    document.getElementById("card-pix").removeAttribute("data-imagemConfirmacao");
    document.getElementById("card-pix").style.display = "flex";
  }
}

// Ajuste na confirma√ß√£o para pegar a imagem tempor√°ria se for presente personalizado
function confirmarPresente() {
  const nomePresente = document.getElementById("presente-titulo").innerText;
  const comentario = document.getElementById("comentario-pix").value;
  const nomeDoador = document.getElementById("nome-doador").value || "An√¥nimo";
  let srcImagem = document.getElementById("card-pix").dataset.imagemConfirmacao;
  if (!srcImagem) {
    srcImagem = imagensPresentesFixos[nomePresente] || "teste.jpg";
  }

  // Envia para o Google Forms
  salvarPresenteGoogleForms(nomeDoador, nomePresente, comentario, srcImagem);

  // Adiciona na lista visual
  const lista = document.getElementById("lista-confirmados");
  const div = document.createElement("div");
  div.className = "presente";
  div.innerHTML = `
    <img src="${srcImagem}" alt="${nomePresente}" style="width:100px; border-radius: 8px; margin-bottom: 10px;" onerror="this.src='teste.jpg'">
    <p><strong>${nomePresente}</strong></p>
    <p>De: <em>${nomeDoador}</em></p>
    <p>${comentario || "Sem coment√°rio üòÖ"}</p>
  `;
  lista.appendChild(div);
  div.classList.add('adicionado');
  setTimeout(() => div.classList.remove('adicionado'), 300);

  fecharPix();
  const imgTemp = document.getElementById("img-temp");
  if (imgTemp) imgTemp.remove();
  delete document.getElementById("card-pix").dataset.imagemConfirmacao;
  currentIndex = document.querySelectorAll('#lista-confirmados .presente').length - 1;
  updateSlider();
}

// Substitua a fun√ß√£o confirmarPresente por esta vers√£o:

function confirmarPresente() {
  const nomePresente = document.getElementById("presente-titulo").innerText;
  const comentario = document.getElementById("comentario-pix").value;
  const nomeDoador = document.getElementById("nome-doador").value || "An√¥nimo";
  let srcImagem = document.getElementById("card-pix").dataset.imagemConfirmacao;
  if (!srcImagem) {
    srcImagem = imagensPresentesFixos[nomePresente] || "teste.jpg";
  }

  // Se for imagem base64, faz upload para o Imgur
  if (srcImagem.startsWith("data:image")) {
    uploadImgur(srcImagem).then(urlImgur => {
      salvarPresenteGoogleForms(nomeDoador, nomePresente, comentario, urlImgur);
      adicionarPresenteVisual(nomePresente, nomeDoador, comentario, urlImgur);
    });
  } else {
    salvarPresenteGoogleForms(nomeDoador, nomePresente, comentario, srcImagem);
    adicionarPresenteVisual(nomePresente, nomeDoador, comentario, srcImagem);
  }

  fecharPix();
  const imgTemp = document.getElementById("img-temp");
  if (imgTemp) imgTemp.remove();
  delete document.getElementById("card-pix").dataset.imagemConfirmacao;
  currentIndex = document.querySelectorAll('#lista-confirmados .presente').length - 1;
  updateSlider();
}

// Adicione tamb√©m esta fun√ß√£o para exibir o presente na lista
function adicionarPresenteVisual(nomePresente, nomeDoador, comentario, imagemUrl) {
  const lista = document.getElementById("lista-confirmados");
  const div = document.createElement("div");
  div.className = "presente";
  let html = "";
  if (imagemUrl) {
   html += `<img src="${imagemUrl}" alt="${nomePresente}" style="width:100px; border-radius: 8px; margin-bottom: 10px;">`;
  }
  html += `
    <p><strong>${nomePresente}</strong></p>
    <p>De: <em>${nomeDoador}</em></p>
    <p>${comentario || "Sem coment√°rio üòÖ"}</p>
  `;
  div.innerHTML = html;
  lista.appendChild(div);
  div.classList.add('adicionado');
  setTimeout(() => div.classList.remove('adicionado'), 300);
}
</script>
// Ajustes nos scripts para o Google Forms
<script>
  // Substitua pelos nomes corretos dos campos conforme seu formul√°rio
function salvarPresenteGoogleForms(nome, presente, mensagem, imagemUrl = "") {
  const url = "https://docs.google.com/forms/d/e/1FAIpQLSfCJIMQ1ThR8norkqsdJ-NcKfy_6n3sHn0RSPs03AouadBONA/formResponse";
  const formData = new FormData();
  formData.append("entry.899788188", nome);      // Nome
  formData.append("entry.1283992162", presente); // Presente
  formData.append("entry.707539019", mensagem);  // Mensagem
  formData.append("entry.2112860432", imagemUrl); // Imagem (se houver)

  alert("Presente confirmado! (O Google Forms n√£o retorna resposta, mas tentamos enviar)");
  fetch(url, {
    method: "POST",
    mode: "no-cors",
    body: formData
  });
}
</script>
<script>
function carregarPresentesConfirmados() {
  const urlCSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSj-N-lKq4ga601XJjxpwjGKxJEHcOOJI0nMLZi1A_0_bX6-pGNpsn3T6iPGhRBoZCxC_1raQbyCZRq/pub?gid=1229724433&single=true&output=csv";
  fetch(urlCSV)
    .then(response => response.text())
    .then(csv => {
      // Divide o CSV em linhas, mas ignora linhas vazias
      const linhas = csv.split('\n').filter(l => l.trim()).slice(1); // pula o cabe√ßalho
      linhas.forEach(linha => {
        // Divide corretamente, mesmo se houver v√≠rgulas dentro de aspas
        const colunas = [];
        let atual = '';
        let dentroAspas = false;
        for (let i = 0; i < linha.length; i++) {
          const char = linha[i];
          if (char === '"' && linha[i + 1] !== '"') {
            dentroAspas = !dentroAspas;
          } else if (char === ',' && !dentroAspas) {
            colunas.push(atual.replace(/(^"|"$)/g, ""));
            atual = '';
          } else {
            atual += char;
          }
        }
        colunas.push(atual.replace(/(^"|"$)/g, "")); // √∫ltimo campo

        if (colunas.length < 5) return;
        const nome = colunas[1];
        const presente = colunas[2];
        const mensagem = colunas[3];
        let imagemUrl = colunas[4].replace(/[\r\n]/g, "").trim().replace(/^"+|"+$/g, "");
        if (!imagemUrl) {
          imagemUrl = "teste.jpg"; // fallback padr√£o se estiver vazio
        }
        // Aceita qualquer link externo (http/https), mesmo sem extens√£o
        // Se n√£o for link externo e n√£o for arquivo local de imagem, usa fallback
        if (
          imagemUrl &&
          !/^https?:\/\//.test(imagemUrl) && // n√£o √© link externo
          !/\.(jpg|jpeg|png|gif)$/i.test(imagemUrl) // e n√£o √© arquivo local de imagem
        ) {
          imagemUrl = "teste.jpg";
        }

        console.log('Imagem lida do CSV:', imagemUrl);

        if (nome && presente) {
          adicionarPresenteVisual(presente, nome, mensagem, imagemUrl);
        }
      });
    });
}

// Chame ao carregar a p√°gina
window.addEventListener('DOMContentLoaded', carregarPresentesConfirmados);
</script>

</body>
</html>
